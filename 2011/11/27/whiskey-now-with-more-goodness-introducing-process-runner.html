<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico">
        <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="tomaz.me feed" />
        <meta name="google-site-verification" content="ynmOt0WzX8sVTNjmph4-tcmcUq8GzD3ao2AqpUJVlcY" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="description" content="Tomaz Muraus' personal blog - technology, distributed systems, open source, startups and life">
        <meta name="author" content="Tomaz Muraus">
        <title>Whiskey Node.js test runner now with more goodness - introducing process runner | tomaz.me</title>

        <link href='/assets/global-0d20aac29f4b0131714e5b31f230a8b6.css' rel='stylesheet' type='text/css' />

    </head>
    <body>
        <div id="links" class="menu">
            <ul class="nobullet">
                <li><a href="/index.html">Home</a></li>
                <li><a href="/archive.html">Archive</a></li>
                <li><a href="/atom.xml">Feed</a></li>
                <li><a href="/about.html">About</a></li>

                <li><br /></li>
                <li class="title">Find me on</li>
                <li><span class='icon icon-twitter'></span><a href="http://twitter.com/KamiSLO">Twitter</a></li>
                <li><span class='icon icon-gplus'></span><a href="https://plus.google.com/106838062648597435631/about">Google+</a></li>
                <li><span class='icon icon-github'></span><a href="http://github.com/Kami">Github</a></li>
                <li><span class='icon icon-launchpad'></span><a href="https://launchpad.net/~tomaz-muraus">Launchpad</a></li>
                <li><span class='icon icon-linkedin'></span><a href="http://www.linkedin.com/in/tomazmuraus">LinkedIn</a></li>
                <li><span class='icon icon-masterbranch'></span><a href="https://masterbranch.com/tomaz.muraus">MasterBranch</a></li>

                <li><br /></li>
                <li class="title">Friends and other blogs</li>
                <li><a href="http://russellhaering.com/">Russell's blog</a></li>
                <li><a href="http://journal.paul.querna.org/">Paul's journal</a></li>
                <li><a href="http://geoff.greer.fm/">Geoff's site</a></li>

                <li><br /></li>
                <li class="title">Currently reading and recently read</li>
              </ul>
              <div id="w588a78173c8fafe30783c4f58f6dd760"></div>
              <script type="text/javascript" charset="UTF-8" src="http://www.librarything.com/widget_get.php?userid=KamiSLO&theID=w588a78173c8fafe30783c4f58f6dd760"></script><noscript><a href="http://www.librarything.com/profile/KamiSLO">My Library</a> at <a href="http://www.librarything.com">LibraryThing</a></noscript>
        </div>
        <div id="wrapper">
            <div id="header">
                <div class="logo"></div>
                <h1><a href="/index.html">computers, programming, ponies and snakes.</a></h1>
            </div>
            <div id="content">
                <div class="postdateheading"> Nov 27, 2011 </div>
<div class="postcontent">
    <p>First a short-introduction for people who aren&#8217;t familiar with Whiskey.</p>

<p><a href='https://github.com/cloudkick/whiskey'>Whiskey</a> is a powerful test runner for Node.js applications. It supports async testing, code coverage, scope leaks reporting, Makefile generation, test timing and lot more. Be sure to check out the <a href='https://github.com/cloudkick/whiskey'>github page</a> which lists all the features.</p>

<p>New version (0.6.0) which has been released today includes a process runner and a support for managing external test dependencies. Test dependency is any kind of process on which the (integration) tests depend on.</p>

<p>Examples include, but are not limited to:</p>

<ul>
<li>database,</li>

<li>some kind of api server,</li>

<li>web server,</li>

<li>other external services</li>
</ul>

<p>Process runner is configured using a simple JSON configuration file. Most of the options have sane default values, which means if you don&#8217;t have any special requirements you can configure it very quickly.</p>

<p>Example configuration file which we use for our monitoring system integration test suite at Rackspace can be found <a href='https://gist.github.com/5953e55ced30ef8a9581'>here</a>.</p>

<p>Each process can also specify its dependencies in the <code>depends</code> option which allows Whiskey to start unrelated processes concurrently.</p>

<p>Before Whiskey process runner was available we have been using <a href='http://www.scons.org/'>scons</a> for managing and running all the test dependencies. Test dependencies related section in our <code>SConstruct</code> file was long and hard to maintain which means switching to Whiskey process runner was a nice improvement.</p>

<p>Process runner can be used by passing <code>--dependencies &lt;configuration_file_path.json&gt;</code> option to <code>whiskey</code> binary. By default all the dependencies specified in the configuration file are started, but there is also <code>--only-esential-dependencies</code> option available which will make Whiskey first inspect the test files and only start the processes which are required by the tests which will be ran.</p>

<p>Each test file can specify on which processes it depends by exporting <code>dependencies</code> attribute. This attribute must be an array and contain the names of the processes as defined in the configuration file.</p>

<p>If you have any questions or suggestions you can find me on #Node.js IRC channel on freenode (nick <code>Kami_</code>). If you find a bug or a problem you can also open an ticket on the project <a href='https://github.com/cloudkick/whiskey/issues'>issue tracker</a>.</p>
</div>
<div class="postfooter">
    <!-- AddThis Button BEGIN -->
    <div class="addthis_toolbox addthis_default_style" style="float: right;">
    <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    <a class="addthis_button_tweet"></a>
    <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    <a class="addthis_button_linkedin_counter"></a>
    </div>
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=undefined"></script>
    <!-- AddThis Button END -->
    <div class="posttags">Tags: <a href="/tags/nodejs.html">nodejs</a>, <a href="/tags/open%20source.html">open source</a>, <a href="/tags/programming.html">programming</a>, <a href="/tags/testing.html">testing</a></div>
</div>

            </div>
        </div>
        <div id="footer">Powered by <a href="https://github.com/mojombo/jekyll" target="_blank" title="Yeah, if you are a Pythonista don't get too excited, it's Ruby">jekyll</a>, design forked from <a href="http://github.com/mrtazz/blog" target="_blank">Daniel Schauenberg</a></div>

        <script src='/assets/global-8ae6dcd00326891a592b0b7023ddb0ee.js' type='text/javascript'></script>

        <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1107810-12']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

    </body>
</html>
